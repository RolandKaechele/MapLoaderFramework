@startuml MapLoaderFramework_ClassDiagram
'
' MapLoaderFramework - Class Diagram
' This diagram shows the main classes, their relationships, and extension points in the framework.
'
class MapLoaderFramework {
    +LoadMapAndConnections(mapName: string)
    +SubscribeToRawJson(callback: Action<string, string>)
    +UnsubscribeFromRawJson(callback: Action<string, string>)
    +GetRawJson(mapId: string): string
    +OnRawJsonUpdated: event Action<string, string>
}

class MapLoaderManager {
    +LoadMap(mapName: string)
    +GetAvailableMaps(): List<string>
}

class AutoMapLoader {
    +defaultMapName: string
    +Start()
}

class MapDropdownLoader {
    +mapDropdown: Dropdown
    +defaultMapName: string
    +Start()
}

class MapLoadTrigger {
    +mapToLoad: string
    +TriggerLoad()
}

class MapData {
    +id: string
    +name: string
    +music: string
    +items: List<Item>
    +warp_events: List<MapWarpConnection>
}

class MapWarpConnection {
    +id: string
    +src_x: int
    +src_y: int
    +dest_map: string
    +dest_x: int
    +dest_y: int
}

class MapWarpLoader {
    +HandleWarpEventMaps(...)
}

class ScriptManager {
    +LoadScript(scriptName: string)
    +ExecuteScript(eventName: string)
}

MapLoaderFramework <|-- MapLoaderManager
MapLoaderManager <.. AutoMapLoader
MapLoaderManager <.. MapDropdownLoader
MapLoaderManager <.. MapLoadTrigger
MapLoaderFramework --> MapData
MapLoaderFramework --> ScriptManager
MapLoaderFramework --> MapWarpLoader
MapData --> MapWarpConnection
@enduml
